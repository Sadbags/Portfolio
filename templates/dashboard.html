{% extends "base.html" %}

{% block title %}Dashboard - Quickr{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Sidebar de navegación -->
	<!-- <nav class="sidebar">
		<div class="sidebar-header">
			<h2>Quickr</h2>
		</div>
		<ul class="sidebar-nav">
			<li><a href="#profile" class="active">Profile</a></li>
			<li><a href="#services">My Services</a></li>
			<li><a href="#create-service">Create Service</a></li>
			<li><a href="#calendar">Calendar</a></li> 
			<li><a href="#settings">Settings</a></li>
			<li><a href="{{ url_for('logout') }}">Logout</a></li>
		</ul>
	</nav> -->

    <!-- Contenedor principal -->
    <div class="main-content">
        <header>
            <h1>Welcome to your Dashboard, {{ current_user.first_name }}</h1>
        </header>

        <!-- Sección de Perfil -->
        <section id="profile" class="section active">
			<h2>My profile</h2>
			<p><strong>Name:</strong> {{ current_user.first_name }} {{ current_user.last_name }}</p>
			<p><strong>Email:</strong> {{ current_user.email }}</p>

			{% if addresses %}
				<h4>Addresses</h4>
				{% for address in addresses %}
					<p><strong>Phone:</strong> {{ address.phone }}</p>
					<p><strong>Address:</strong> {{ address.street }}, {{ address.city }}, {{ address.state }} {{ address.zip_code }}</p>
					<hr>
				{% endfor %}
			{% else %}
				<p>No address available</p>
			{% endif %}

			<a href="{{ url_for('profile') }}" class="btn btn-primary">View Profile</a>
		</section>

        <!-- Sección de Mis Servicios -->
        <section id="services" class="section">
			<h2>My Services</h2>
			<ul class="service-list">
				{% for service in current_user.services %}
				<li>
					<p><strong>Name:</strong> {{ service.name }}</p>
					<p><strong>Description:</strong> {{ service.description }}</p>
					<p><strong>Price:</strong> ${{ service.aprox_price }}</p>
					<p><strong>Fee:</strong> {{ service.fee }}%</p>
					<a href="{{ url_for('edit_service', service_id=service.id) }}" class="btn btn-secondary">Editar</a>
				</li>
				{% else %}
				<p>No service has been created</p>
				{% endfor %}
			</ul>
		</section>

		<!-- Sección de Mis Citas (Appointments) -->
		<section id="appointments" class="section">
			<h2>My Appointments</h2>
			<ul class="appointment-list">
				{% if appointments %}
					{% for appointment in appointments %}
						<li>
							<h3>{{ appointment.service_name }}</h3>
							<p>{{ appointment.appointment_date }} at {{ appointment.appointment_time }}</p>
							<p><strong>Status:</strong> {{ appointment.status }}</p>
						</li>
					{% endfor %}
				{% else %}
					<p>No appointments scheduled yet.</p>
				{% endif %}
			</ul>
		</section>

		    <!-- Sección para Crear Servicio -->

				<form id="create-service-form">
					<h2>Create a new service</h2>
				<div class="form-group">
					<label for="service_name">Service Name</label>
					<input type="text" id="service_name" name="name" required class="form-control" placeholder="Enter service name">
				</div>
				<div class="form-group">
					<label for="service_description">Description</label>
					<textarea id="service_description" name="description" required class="form-control" placeholder="Enter service description"></textarea>
				</div>
				<div class="form-group">
					<label for="service_price">Approximate Price</label>
					<input type="number" id="service_price" name="aprox_price" required class="form-control" placeholder="Enter approximate price">
				</div>
				<div class="form-group">
					<label for="service_category">Category</label>
					<input type="text" id="service_category" name="category" required class="form-control" placeholder="Enter category">
				</div>
				<div class="form-group">
					<label for="service_fee">Fee</label>
					<input type="number" id="service_fee" name="fee" required class="form-control" placeholder="Enter fee">
				</div>
				<button type="submit" class="btn btn-primary">Create Service</button>
			</form>


        <!-- Sección de Calendario -->
        <section id="calendar" class="section">
            <h2>Calendar</h2>
            <div class="calendar__container">
                <div class="calendar">
                    <div class="calendar__header">
                        <div class="month"></div>
                        <div class="calendar__btns">
                            <div class="btn today-btn">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <div class="btn prev-btn">
                                <i class="fas fa-chevron-left"></i>
                            </div>
                            <div class="btn next-btn">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    </div>
                    <div class="weekdays">
                        <div class="day">Sun</div>
                        <div class="day">Mon</div>
                        <div class="day">Tue</div>
                        <div class="day">Wed</div>
                        <div class="day">Thu</div>
                        <div class="day">Fri</div>
                        <div class="day">Sat</div>
                    </div>
                    <div class="days">
                        <!-- Los días se agregarán usando JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Ajustes -->
        <section id="settings" class="section">
            <h2>Settings</h2>
            <p>Here you can costumize your account.</p>
        </section>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='JS/calendar.js') }}"></script>
<script src="{{ url_for('static', filename='JS/dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='JS/create_service.js') }}"></script>
<script src="{{ url_for('static', filename='JS/address.js') }}"></script>
{% endblock %}