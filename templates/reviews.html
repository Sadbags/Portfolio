{% extends 'base.html' %}

{% block title %}Reviews - Quickr{% endblock %}

{% block content %}
<main>
    <div class="review-container">
        <h1>Service Reviews</h1>

        <!-- Sección para mostrar las reseñas -->
        <div class="reviews-section">
            {% if reviews %}
                {% for review in reviews %}
                    <div class="review-card">
                        <div class="review-header">
                            <span class="review-author">{{ review.user_name }}</span>
                            <span class="review-date">{{ review.date_posted.strftime('%b %d, %Y') }}</span>
                        </div>
                        <div class="review-body">
                            <p>{{ review.comment }}</p>
                        </div>
                        <div class="review-rating">
                            {% for star in range(1, 6) %}
                                {% if star <= review.rating %}
                                    <span class="star filled">&#9733;</span> <!-- Estrella llena -->
                                {% else %}
                                    <span class="star">&#9734;</span> <!-- Estrella vacía -->
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p>No reviews yet. Be the first to review!</p>
            {% endif %}
        </div>

        <!-- Formulario para añadir una nueva reseña -->
        <div class="review-form">
            <h2>Write a Review</h2>
            <form id="review-form" method="POST" action="{{ url_for('submit_review') }}">
                <div class="form-group">
                    <label for="rating">Rating</label>
                    <select id="rating" name="rating" required>
                        <option value="1">1 - Poor</option>
                        <option value="2">2 - Fair</option>
                        <option value="3">3 - Good</option>
                        <option value="4">4 - Very Good</option>
                        <option value="5">5 - Excellent</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="comment">Comment</label>
                    <textarea id="comment" name="comment" rows="4" required></textarea>
                </div>

                <div class="form-group">
                    <button type="submit">Submit Review</button>
                </div>
            </form>
        </div>
    </div>
</main>

<script src="{{ url_for('static', filename='JS/review.js') }}"></script>
{% endblock %}
